<div class="customer-list-container">
  <!-- Header -->
  <div class="header">
    <h2>Clientes</h2>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="createCustomer()" [disabled]="loading">
        <span class="icon">+</span>
        Novo Cliente
      </button>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <!-- Search -->
    <div class="filter-group">
      <label for="search">Busca R√°pida:</label>
      <input
        id="search"
        type="text"
        class="form-control"
        [(ngModel)]="searchQuery"
        (ngModelChange)="onSearchChange($event)"
        placeholder="Nome, CPF ou CNPJ..."
      />
    </div>

    <!-- Type Filter -->
    <div class="filter-group">
      <label for="type">Tipo:</label>
      <select
        id="type"
        class="form-control"
        [(ngModel)]="selectedType"
        (ngModelChange)="onFilterChange()"
      >
        <option value="">Todos</option>
        <option [value]="CustomerType.INDIVIDUAL">Pessoa F√≠sica</option>
        <option [value]="CustomerType.BUSINESS">Pessoa Jur√≠dica</option>
      </select>
    </div>

    <!-- Status Filter -->
    <div class="filter-group">
      <label for="status">Status:</label>
      <select
        id="status"
        class="form-control"
        [(ngModel)]="selectedStatus"
        (ngModelChange)="onFilterChange()"
      >
        <option [value]="true">Ativos</option>
        <option [value]="false">Inativos</option>
        <option value="">Todos</option>
      </select>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Carregando clientes...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-message">
    <span class="icon">‚ö†Ô∏è</span>
    {{ error }}
    <button class="btn btn-sm btn-outline-primary" (click)="loadCustomers()">
      Tentar Novamente
    </button>
  </div>

  <!-- Customer Table -->
  <div *ngIf="!loading && !error && customers" class="table-container">
    <table class="customer-table">
      <thead>
        <tr>
          <th>Tipo</th>
          <th>CPF/CNPJ</th>
          <th>Nome/Raz√£o Social</th>
          <th>Nome Fantasia</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Status</th>
          <th class="actions-column">A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let customer of customers.content">
          <td>
            <span class="badge" [ngClass]="getTypeBadgeClass(customer.customerType)">
              {{ getTypeLabel(customer.customerType) }}
            </span>
          </td>
          <td>{{ getTaxId(customer) }}</td>
          <td>
            <strong>{{ customer.displayName }}</strong>
            <span *ngIf="customer.isDefaultConsumer" class="badge badge-default" title="Cliente padr√£o para PDV">
              üõí Padr√£o PDV
            </span>
          </td>
          <td>{{ customer.tradeName || '-' }}</td>
          <td>{{ customer.email || '-' }}</td>
          <td>{{ customer.phone || customer.mobile || '-' }}</td>
          <td>
            <span class="badge" [ngClass]="getStatusBadgeClass(customer.ativo)">
              {{ getStatusLabel(customer.ativo) }}
            </span>
          </td>
          <td class="actions">
            <button
              class="btn btn-sm btn-outline-primary"
              (click)="editCustomer(customer.id)"
              title="Editar"
            >
              ‚úèÔ∏è
            </button>
            <button
              class="btn btn-sm btn-outline-danger"
              (click)="deleteCustomer(customer)"
              [disabled]="customer.isDefaultConsumer"
              title="Inativar"
            >
              üóëÔ∏è
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Empty State -->
    <div *ngIf="customers.content.length === 0" class="empty-state">
      <span class="icon">üë•</span>
      <p>Nenhum cliente encontrado</p>
      <button class="btn btn-primary" (click)="createCustomer()">
        Criar Primeiro Cliente
      </button>
    </div>
  </div>

  <!-- Pagination -->
  <div *ngIf="customers && customers.totalPages > 1" class="pagination">
    <button
      class="btn btn-outline-primary"
      (click)="previousPage()"
      [disabled]="currentPage === 0"
    >
      ‚Üê Anterior
    </button>
    <span class="page-info">
      P√°gina {{ currentPage + 1 }} de {{ customers.totalPages }}
      ({{ customers.totalElements }} clientes)
    </span>
    <button
      class="btn btn-outline-primary"
      (click)="nextPage()"
      [disabled]="currentPage >= customers.totalPages - 1"
    >
      Pr√≥xima ‚Üí
    </button>
  </div>
</div>
